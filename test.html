<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>五角星彩虹跑马灯</title>
<style>
html,body{margin:0;height:100%;background:#111;display:flex;justify-content:center;align-items:center;}
#box{
    width:700px;
    height:500px;
    position:relative;
    border:1px solid #333;
    overflow:hidden;
    background:#000;
}
.star{
    position:absolute;
    width:18px;
    height:18px;
}
.star svg{
    width:100%;
    height:100%;
}
.star polygon{
    fill:transparent;
    stroke:transparent;
    stroke-width:0.5;
    transition:opacity 0.2s ease-out;
}
.star.fading polygon{
    fill:currentColor;
    stroke:currentColor;
    opacity:0;
    filter:drop-shadow(0 0 6px currentColor);
    transition:opacity 0.15s ease-out;
}
.star.active polygon{
    fill:currentColor;
    stroke:currentColor;
    opacity:1;
    filter:drop-shadow(0 0 10px currentColor);
}
#start{
    position:absolute;
    bottom:20px;left:50%;
    transform:translateX(-50%);
    padding:10px 20px;
    background:#fff;
    border:none;border-radius:4px;
    cursor:pointer;z-index:10;
    font-weight:bold;
    transition:all 0.3s ease;
}
#start:hover{
    background:#f0f0f0;
    transform:translateX(-50%) scale(1.05);
}
</style>
</head>
<body>
<div id="box"></div>
<button id="start">开始</button>

<script>
const box=document.getElementById('box');
const cols=Math.floor(700/25),rows=Math.floor(500/25);
const stars=[];
    // 金色到紫红色渐变色彩方案
    const goldToPurple=[
        '#FFD700', // 金色
        '#FFA500', // 橙金色
        '#FF6347', // 橙红色
        '#FF1493', // 深粉红
        '#DC143C', // 紫红色
        '#8B008B'  // 深紫红色
    ];

// 画五角星
function makeStar(x,y){
    const dv=document.createElement('div');
    dv.className='star';
    dv.style.left=x+'px';dv.style.top=y+'px';
    const svg=document.createElementNS('http://www.w3.org/2000/svg','svg');
    svg.setAttribute('viewBox','0 0 20 20');
    const poly=document.createElementNS('http://www.w3.org/2000/svg','polygon');
    const pts=[],r=10,cx=10,cy=10;
    for(let i=0;i<10;i++){
        const a=(i*Math.PI/5)-Math.PI/2,rad=i%2?r*0.4:r;
        pts.push(cx+rad*Math.cos(a),cy+rad*Math.sin(a));
    }
    poly.setAttribute('points',pts.join(' '));
    svg.appendChild(poly);dv.appendChild(svg);
    box.appendChild(dv);
    return {el:dv,x:x+9,y:y+9}; // 中心坐标
}

// 铺满
for(let r=0;r<rows;r++){
    for(let c=0;c<cols;c++){
        stars.push(makeStar(c*25+12,r*25+12));
    }
}

// 计算到中心距离并排序
const cx=700/2,cy=500/2;
stars.forEach(s=>s.d=Math.hypot(s.x-cx,s.y-cy));
stars.sort((a,b)=>a.d-b.d);

// 金色到紫红色渐变圆圈扩散效果
function run(){
    const step=25;          // 加快扩散速度（25ms间隔）
    const ringWidth=35;     // 圆圈宽度
    const fadeInSteps=3;    // 渐显步数（减少步数加快效果）
    
    // 按距离分组
    const distanceGroups=new Map();
    stars.forEach(star=>{
        const distance=Math.round(star.d/ringWidth)*ringWidth;
        if(!distanceGroups.has(distance)){
            distanceGroups.set(distance,[]);
        }
        distanceGroups.get(distance).push(star);
    });
    
    // 按距离排序的组
    const sortedGroups=Array.from(distanceGroups.entries()).sort((a,b)=>a[0]-b[0]);
    
    // 为每个距离组创建金色到紫红的渐变效果
    sortedGroups.forEach((group,index)=>{
        const color=goldToPurple[index%goldToPurple.length];
        const currentRingDistance=group[0];
        const starsInRing=group[1];
        
        // 快速渐显效果
        for(let stepIndex=1;stepIndex<=fadeInSteps;stepIndex++){
            const previewDistance=currentRingDistance-(ringWidth/fadeInSteps)*stepIndex;
            if(distanceGroups.has(previewDistance)){
                const previewStars=distanceGroups.get(previewDistance);
                const opacity=0.2*stepIndex; // 更快的透明度增加
                
                setTimeout(()=>{
                    previewStars.forEach(star=>{
                        star.el.style.color=color;
                        star.el.classList.add('fading');
                        star.el.querySelector('polygon').style.opacity=opacity;
                    });
                },(index-stepIndex*0.5)*step);
            }
        }
        
        // 主圆圈到达 - 最亮显示
        setTimeout(()=>{
            starsInRing.forEach(star=>{
                star.el.style.color=color;
                star.el.classList.remove('fading');
                star.el.classList.add('active');
                star.el.querySelector('polygon').style.opacity='1';
            });
            
            // 快速渐隐为透明 - 圆圈离开后迅速消失
            setTimeout(()=>{
                starsInRing.forEach(star=>{
                    star.el.classList.remove('active');
                    star.el.classList.add('fading');
                    star.el.querySelector('polygon').style.opacity='0';
                });
            },200); // 缩短亮灯时间到200ms
        },index*step);
    });
}

document.getElementById('start').addEventListener('click',run);
</script>
</body>
</html>